# 电机驱动云台

## 实验目的

通过电机的速度环PID控制来保持陀螺仪水平

## 实验所需

上一个实验是自己设定目标速度来使电机转速改变，故这次实验将利用陀螺仪的角度信息，通过一个速度和角度偏差量的自定义映射函数，来控制电机转速改变。

## 实验代码

变量定义部分

![](.\image\14.png)



初始化部分以及部分陀螺仪解码区

![](.\image\15.png)





陀螺仪解码区以及PWM速度设定映射函数的调用

![](.\image\16.png)



串口中断回调函数、速度设定映射函数、光栅中断回调函数、定时器中断回调函数、PI参数设定值

![](.\image\17.png)





PID控制函数、正反转设定函数

![](.\image\18.png)

