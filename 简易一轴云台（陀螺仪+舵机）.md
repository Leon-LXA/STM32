# 简易一轴云台

## 实验目的

上一次学习了陀螺仪显示数据与舵机的运动，这次实验将利用陀螺仪显示的数据来控制舵机运动，保持云台水平。

## 实验所需函数

上两次实验所需的函数，

包括中断回调函数HAL_UART_RxCpltCallback(UART_HandleTypeDef *huart);

HAL_UART_Receive_IT(&huart1,Rx_buf,11u);

## 实验配置

利用TIM3中的PWM通道控制舵机转动。

USART串口的TX、RX来通信陀螺仪数据。

## 实验步骤

### 1.找到旋转方向对应的参数名

### 2.利用if语句，将陀螺仪y轴数据归零（注意CCR的加减方向）

### 3.将陀螺仪绑在舵机上

## 实验函数

除去陀螺仪的通信函数以及舵机PWM初始化函数，还需要以下的云台控制程序

![](.\image\8.png)

## 总结与注意

1.为了防止舵机转过头，需要设置CCR小于500时即为500，大于2500时即为2500。

2.需要delay函数来避免CCR改变过快，舵机来不及转。

3.注意CCR加减方向，防止正反馈偏转。

